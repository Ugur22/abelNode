<!DOCTYPE html>
<html lang="en">

<head>
	<% include ../partials/head %>
</head>

<body class="container">

	<header>
		<% include ../partials/header %>
	</header>

	<main>
		<div class="jumbotron">
			<h3>
				<%= header %>
					</h1>
					<form id="urlForm" method="POST" action="/">
						<div class="form-group">
							<label for="InputUrl">URL</label>
							<input type="text" class="form-control" id="url" aria-describedby="urlHelp" name="url" placeholder="Enter url">
						</div>
						<button type="submit" class="btn btn-primary">Submit</button>
					</form>
					<ul>
					</ul>
					<ol id="violationList">
						<ol>
		</div>
	</main>

	<footer>
		<% include ../partials/footer %>
	</footer>
	<script>
		const preObject = document.getElementById('violationList');
		let socket = io();
		socket.on('data', function (val) {
			for (let i = 0; i < val.length; i++) {
				var item = val[i];
				var elem = document.createElement("li");
				var b = document.createElement("b");
				var iElem = document.createElement("i");
				var helpurl = document.createElement("b");
				elem.innerText = item["description"];
				b.innerText = "impact: " + item["impact"] + " ";
				iElem.innerText = item["help"];
				helpurl.innerHTML = "For more details: " + item["helpUrl"]
				preObject.appendChild(elem);
				preObject.appendChild(b);
				preObject.appendChild(iElem);
				preObject.appendChild(helpurl);
			}
			console.log(val);

		});
	</script>
</body>

</html>

